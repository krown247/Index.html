<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wordle 4 - Daily</title>
    <style>
        :root {
            --correct: #6aaa64;
            --present: #c9b458;
            --absent: #3a3a3c;
            --dark: #121213;
            --tile-border: #3a3a3c;
        }
        body { background-color: var(--dark); color: white; font-family: -apple-system, sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }
        header { border-bottom: 1px solid #3a3a3c; width: 100%; text-align: center; padding: 10px 0; }
        h1 { margin: 0; font-size: 1.5rem; letter-spacing: 2px; }
        
        #game-container { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; gap: 10px; padding: 10px; }
        .row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; }
        .tile { width: 62px; height: 62px; border: 2px solid var(--tile-border); display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; text-transform: uppercase; }
        
        /* Keyboard Styling */
        #keyboard { width: 100%; padding: 10px; display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px; }
        .keyboard-row { display: flex; justify-content: center; gap: 4px; }
        .key { background-color: #818384; color: white; border: 0; border-radius: 4px; height: 58px; min-width: 32px; padding: 0 10px; font-weight: bold; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .key.large { min-width: 65px; font-size: 0.8rem; }
        
        /* State Colors */
        .correct { background-color: var(--correct); border-color: var(--correct); }
        .present { background-color: var(--present); border-color: var(--present); }
        .absent { background-color: var(--absent); border-color: var(--absent); }
    </style>
</head>
<body>
    <header><h1>WORDLE 4</h1></header>
    <div id="game-container">
        <div id="board"></div>
    </div>
    <div id="keyboard"></div>

    <script>
        // Curated dictionary of common 4-letter words
        const dictionary = ["ABLE", "AREA", "BACK", "BANK", "BEAR", "BLUE", "BOOK", "CITY", "COLD", "DARK", "DEAR", "DOOR", "EASY", "FACE", "FACT", "FAST", "FIRE", "FISH", "GAME", "GOLD", "GOOD", "HAND", "HELP", "HOME", "HOPE", "IRON", "JUST", "KEEP", "KIND", "LIFE", "LIKE", "LINE", "LOVE", "MAIN", "MIND", "NAME", "NEAR", "OPEN", "PART", "PLAY", "RAIN", "READ", "REAL", "RIDE", "ROAD", "ROCK", "SHIP", "SIDE", "SNOW", "STAR", "STAY", "SURE", "TAKE", "TALK", "TEAM", "TIME", "TRUE", "WALK", "WIND", "WORD", "WORK", "YEAR"];

        // Daily Word Logic (based on days since Jan 1, 2024)
        const startDate = new Date("2024-01-01").getTime();
        const today = new Date().setHours(0,0,0,0);
        const dayIndex = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
        const targetWord = dictionary[dayIndex % dictionary.length];

        let currentGuess = "";
        let guesses = [];
        let gameOver = false;

        // Initialize Board
        const board = document.getElementById('board');
        for (let i = 0; i < 6; i++) {
            const row = document.createElement('div');
            row.className = 'row';
            for (let j = 0; j < 4; j++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                row.appendChild(tile);
            }
            board.appendChild(row);
        }

        // Initialize Keyboard
        const keys = [
            ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],
            ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],
            ['ENTER', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', '⌫']
        ];
        const keyboard = document.getElementById('keyboard');
        keys.forEach(row => {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'keyboard-row';
            row.forEach(key => {
                const btn = document.createElement('button');
                btn.className = 'key' + (key.length > 1 ? ' large' : '');
                btn.innerText = key;
                btn.onclick = () => handleInput(key === '⌫' ? 'BACKSPACE' : key);
                rowDiv.appendChild(btn);
            });
            keyboard.appendChild(rowDiv);
        });

        function handleInput(key) {
            if (gameOver) return;
            if (key === 'ENTER') {
                if (currentGuess.length === 4) submitGuess();
            } else if (key === 'BACKSPACE' || key === 'Backspace') {
                currentGuess = currentGuess.slice(0, -1);
            } else if (currentGuess.length < 4 && /^[A-Z]$/.test(key.toUpperCase())) {
                currentGuess += key.toUpperCase();
            }
            updateBoard();
        }

        function updateBoard() {
            const rows = document.getElementsByClassName('row');
            const tiles = rows[guesses.length].getElementsByClassName('tile');
            for (let i = 0; i < 4; i++) {
                tiles[i].innerText = currentGuess[i] || "";
            }
        }

        function submitGuess() {
            const rows = document.getElementsByClassName('row');
            const tiles = rows[guesses.length].getElementsByClassName('tile');
            const guessArray = currentGuess.split('');
            const targetArray = targetWord.split('');

            guessArray.forEach((char, i) => {
                if (char === targetArray[i]) {
                    tiles[i].classList.add('correct');
                    targetArray[i] = null;
                }
            });

            guessArray.forEach((char, i) => {
                if (!tiles[i].classList.contains('correct')) {
                    const index = targetArray.indexOf(char);
                    if (index !== -1) {
                        tiles[i].classList.add('present');
                        targetArray[index] = null;
                    } else {
                        tiles[i].classList.add('absent');
                    }
                }
            });

            if (currentGuess === targetWord) {
                gameOver = true;
                setTimeout(() => alert("Perfect! See you tomorrow."), 500);
            } else if (guesses.length === 5) {
                gameOver = true;
                setTimeout(() => alert("The word was " + targetWord), 500);
            }
            
            guesses.push(currentGuess);
            currentGuess = "";
        }

        // Listen for hardware keyboard (optional)
        window.addEventListener('keydown', (e) => handleInput(e.key.toUpperCase()));
    </script>
</body>
</html>
